(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[83],{1916:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Oe}));var n=i(158),o=i(27),a=i(1),r=i(1242),c=i.n(r),l=i(32),s=i(49),d=i(1226),j=i(1201),u=i(1255),h=i(1419),b=i(1420),v=i(1424),p=i(1422),O=i(1423),x=i(1221),g=i(1206),m=i(296),f=i(1276),y=i(103),w=i(63),S=i(22),k=i(91),C=i(380),_=i(381),R=i(68),P=i(1244),I=i(1241),L=i(1561),F=i(1421),N=i(1939),B=i(557),W=i(0);function A(e){let{order:t,orderBy:i,rowCount:n,headLabel:o,numSelected:a,onRequestSort:r,onSelectAllClick:c}=e;return Object(W.jsx)(F.a,{children:Object(W.jsx)(p.a,{children:o.map((e=>{return Object(W.jsx)(O.a,{align:e.alignRight?"right":"left",sortDirection:i===e.id&&t,children:Object(W.jsxs)(N.a,{hideSortIcon:!0,active:i===e.id,direction:i===e.id?t:"asc",onClick:(n=e.id,e=>{r(e,n)}),children:[e.label,i===e.id?Object(W.jsx)(B.a,{sx:{...L.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))})})}var D=i(298),T=i.n(D),q=i(4),z=i(1224),E=i(1210),M=i(1229),G=i(1227),J=i(1204);const U=Object(q.a)(z.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),K=Object(q.a)(E.a)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function Q(e){let{loading:t,handleGo:i,filterName:n,onFilterName:a}=e;return Object(W.jsxs)(U,{children:[Object(W.jsx)(K,{value:n,onChange:a,placeholder:"Rechercher un superviseur?...",startAdornment:Object(W.jsx)(M.a,{position:"start",children:Object(W.jsx)(B.a,{component:o.a,icon:T.a,sx:{color:"text.disabled"}})})}),Object(W.jsx)(G.a,{title:"Filter list",children:Object(W.jsx)(J.a,{sx:{py:2,px:3},loading:t,variant:"contained",onClick:i,children:"Rafra\xeechir"})})]})}var V=i(1243),H=i.n(V),X=i(1262),Y=i.n(X),Z=i(1263),$=i.n(Z),ee=i(1249),te=i.n(ee),ie=i(1246),ne=i.n(ie),oe=i(159),ae=i(1214),re=i(553),ce=i(1230),le=i(1185),se=i(1186),de=i(222),je=i(76),ue=i(46),he=i(297);function be(e){var t;let{block:i,supervisorId:n}=e;const r=Object(a.useRef)(null),{user:c}=Object(ue.a)(),[s,d]=Object(a.useState)(!1),{enqueueSnackbar:j}=Object(oe.b)(),u=Object(y.c)();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ae.a,{ref:r,onClick:()=>d(!0),children:Object(W.jsx)(o.a,{icon:ne.a,width:20,height:20})}),Object(W.jsxs)(re.a,{open:s,anchorEl:r.current,onClose:()=>d(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(he.a)(null===c||void 0===c?void 0:c.perms,"delete_supervisor")&&Object(W.jsxs)(ce.a,{onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir supprimer?")&&(async()=>{d(!1);const e=new FormData;e.append("supervisorId",n),await de.a.handleDeleteSupervisor(e),u(Object(w.F)()),j("delete with success",{variant:"success"})})()},sx:{color:"red"},children:[Object(W.jsx)(le.a,{children:Object(W.jsx)(o.a,{icon:te.a,width:24,height:24})}),Object(W.jsx)(se.a,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]}),Object(he.a)(null===c||void 0===c?void 0:c.perms,je.a.BLOCK_SUP)&&Object(W.jsxs)(ce.a,{onClick:async()=>{d(!1);const e={supervisorId:n,type:"block"};await de.a.handleModifySupervisor(e),u(Object(w.F)()),j(i?"unblock with success":"Block with success",{variant:"success"})},sx:{color:"text.secondary"},children:[Object(W.jsx)(le.a,{children:Object(W.jsx)(o.a,{icon:i?Y.a:$.a,width:24,height:24})}),Object(W.jsx)(se.a,{primary:i?"Unblock":"Block",primaryTypographyProps:{variant:"body2"}})]}),Object(he.a)(null===c||void 0===c?void 0:c.perms,"change_supervisor")&&Object(W.jsxs)(ce.a,{component:l.b,to:"".concat(null===(t=S.a.supervisor)||void 0===t?void 0:t.root,"/").concat(n,"/edit"),sx:{color:"text.secondary"},children:[Object(W.jsx)(le.a,{children:Object(W.jsx)(o.a,{icon:H.a,width:24,height:24})}),Object(W.jsx)(se.a,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]})]})]})}const ve=[{id:"name",label:"Nom complet",alignRight:!1},{id:"ref_code",label:"Ref_code",alignRight:!1},{id:"phone",label:"T\xe9l\xe9phone",alignRight:!1},{id:"country",label:"Pays",alignRight:!1},{id:"city",label:"Ville",alignRight:!1},{id:"addresse_complet",label:"Adresse compl\xe8te",alignRight:!1},{id:"block",label:"Block",alignRight:!1},{id:""}];function pe(e,t,i){return t[i]<e[i]?-1:t[i]>e[i]?1:0}function Oe(){var e,t,i;const{user:r}=Object(ue.a)(),{themeStretch:L}=Object(k.a)(),F=Object(s.a)(),N=Object(y.c)(),{supervisors:B}=Object(y.d)((e=>e.user)),[D,T]=Object(a.useState)(0),[q,z]=Object(a.useState)("asc"),[E,M]=Object(a.useState)([]),[G,J]=Object(a.useState)("first_name"),[U,K]=Object(a.useState)(""),[V,H]=Object(a.useState)(25),[X,Y]=Object(a.useState)(!1),Z=async()=>{Y(!0),await N(Object(w.F)()),Y(!1)};Object(a.useEffect)((()=>{Z()}),[N]);const $=D>0?Math.max(0,(1+D)*V-B.length):0,ee=function(e,t,i){const o=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===o||void 0===o||o.sort(((e,i)=>{const n=t(e[0],i[0]);return 0!==n?n:e[1]-i[1]})),i?Object(n.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.first_name.toLowerCase().indexOf(i.toLowerCase())))):null===o||void 0===o?void 0:o.map((e=>e[0]))}(B,function(e,t){return"desc"===e?(e,i)=>pe(e,i,t):(e,i)=>-pe(e,i,t)}(q,G),U),te=0===(null===ee||void 0===ee?void 0:ee.length);return Object(W.jsx)(C.a,{title:"Superviseur: List | RLP Center Lotto",children:Object(W.jsxs)(d.a,{maxWidth:!L&&"lg",children:[Object(W.jsx)(I.a,{heading:"Liste des superviseurs",links:[{name:"Dashboard",href:S.a.root},{name:"Superviseur",href:null===(e=S.a.supervisor)||void 0===e?void 0:e.root},{name:"Listes"}],action:Object(he.a)(null===r||void 0===r?void 0:r.perms,"add_supervisor")&&Object(W.jsx)(j.a,{variant:"contained",component:l.b,to:null===(t=S.a.supervisor)||void 0===t?void 0:t.newSupervisor,startIcon:Object(W.jsx)(o.a,{icon:c.a}),children:"Ajouter superviseur"})}),Object(W.jsxs)(u.a,{children:[Object(W.jsx)(Q,{handleGo:Z,loading:X,filterName:U,onFilterName:e=>{K(e.target.value)}}),Object(W.jsx)(R.a,{children:Object(W.jsx)(h.a,{sx:{minWidth:800},children:Object(W.jsxs)(b.a,{children:[Object(W.jsx)(A,{order:q,orderBy:G,headLabel:[..."superuser"===(null===r||void 0===r?void 0:r.role)?[{id:"company",label:"Compagnie",alignRight:!1}]:[],...ve],rowCount:null===B||void 0===B?void 0:B.length,numSelected:null===E||void 0===E?void 0:E.length,onRequestSort:(e,t)=>{z(G===t&&"asc"===q?"desc":"asc"),J(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===B||void 0===B?void 0:B.map((e=>e.id));M(e)}else M([])}}),Object(W.jsxs)(v.a,{children:[null===(i=V>0?null===ee||void 0===ee?void 0:ee.slice(D*V,D*V+V):ee)||void 0===i?void 0:i.map((e=>{const t=-1!==E.indexOf(null===e||void 0===e?void 0:e.id);return Object(W.jsxs)(p.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:["superuser"===(null===r||void 0===r?void 0:r.role)&&Object(W.jsx)(O.a,{component:"th",scope:"row",padding:"none",children:Object(W.jsxs)(x.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(W.jsx)(g.a,{alt:null===e||void 0===e?void 0:e.companyName,src:null===e||void 0===e?void 0:e.company_photo}),Object(W.jsx)(m.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyName})]})}),"superuser"!==(null===r||void 0===r?void 0:r.role)&&Object(W.jsx)(O.a,{component:"th",scope:"row",padding:"none",children:Object(W.jsxs)(x.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(W.jsx)(g.a,{alt:null===e||void 0===e?void 0:e.first_name,src:null===e||void 0===e?void 0:e.user_photo}),Object(W.jsxs)(m.a,{variant:"subtitle2",noWrap:!0,children:[null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]})]})}),"superuser"===(null===r||void 0===r?void 0:r.role)&&Object(W.jsxs)(O.a,{align:"left",children:[null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.ref_code}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.phone}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.country_name}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.city_name}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.addresse_complet}),Object(W.jsx)(O.a,{align:"left",children:Object(W.jsx)(_.a,{variant:"light"===F.palette.mode?"ghost":"filled",color:(null===e||void 0===e?void 0:e.block)?"error":"success",children:null!==e&&void 0!==e&&e.block?"Oui":"Non"})}),Object(W.jsx)(O.a,{align:"right",children:Object(W.jsx)(be,{block:null===e||void 0===e?void 0:e.block,supervisorId:null===e||void 0===e?void 0:e.id})})]},null===e||void 0===e?void 0:e.id)})),$>0&&Object(W.jsx)(p.a,{style:{height:53*$},children:Object(W.jsx)(O.a,{colSpan:6})})]}),te&&Object(W.jsx)(v.a,{children:Object(W.jsx)(p.a,{children:Object(W.jsx)(O.a,{align:"center",colSpan:6,sx:{py:3},children:Object(W.jsx)(P.a,{searchQuery:U})})})})]})})}),Object(W.jsx)(f.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===B||void 0===B?void 0:B.length,rowsPerPage:V,page:D,onPageChange:(e,t)=>{T(t)},onRowsPerPageChange:e=>{H(parseInt(e.target.value,10)),T(0)}})]})]})})}}}]);
//# sourceMappingURL=83.c99bd50a.chunk.js.map