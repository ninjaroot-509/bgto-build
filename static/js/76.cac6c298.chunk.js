(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[76],{1923:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ae}));var n=a(158),i=a(27),c=a(1),l=(a(1242),a(189)),o=a(114),r=a(49),d=a(1226),s=a(1255),j=a(1419),u=a(1420),h=a(1424),b=a(1422),O=a(1423),x=a(1221),g=a(1206),p=a(296),v=a(1276),m=a(103),f=a(63),y=a(22),C=a(91),S=a(380),w=(a(381),a(68)),P=a(1244),L=a(1241),R=a(1561),k=a(1421),D=a(1939),F=a(557),W=a(0);function I(e){let{order:t,orderBy:a,rowCount:n,headLabel:i,numSelected:c,onRequestSort:l,onSelectAllClick:o}=e;return Object(W.jsx)(k.a,{children:Object(W.jsx)(b.a,{children:i.map((e=>{return Object(W.jsx)(O.a,{align:e.alignRight?"right":"left",sortDirection:a===e.id&&t,children:Object(W.jsxs)(D.a,{hideSortIcon:!0,active:a===e.id,direction:a===e.id?t:"asc",onClick:(n=e.id,e=>{l(e,n)}),children:[e.label,a===e.id?Object(W.jsx)(F.a,{sx:{...R.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))})})}a(298),a(1307),a(1308);var M=a(4),T=a(1224),_=a(1233),z=a(1230),V=a(1227),q=a(1204),A=a(1911);Object(M.a)(T.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,6)}}));function B(e){var t;let{onChangeDate1:a,onChangeDate2:n,handleGo:i,value:c,value1:l,value2:o,setValue2:d,compagnies:s,loading:j,setLoading:u}=e;Object(r.a)().palette.mode;return Object(W.jsxs)(x.a,{spacing:2,direction:{xs:"column",md:"row"},sx:{py:2.5,px:3},children:[Object(W.jsx)(_.a,{fullWidth:!0,select:!0,label:"Compagnie",value:o,onChange:e=>d(e.target.value),SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{textTransform:"capitalize"},children:null===(t=[{id:0,companyname:"Tout"},...s])||void 0===t?void 0:t.map((e=>Object(W.jsx)(z.a,{value:null===e||void 0===e?void 0:e.id,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.companyname},null===e||void 0===e?void 0:e.id)))}),Object(W.jsx)(A.a,{label:"Date de d\xe9but",value:c,inputFormat:"yyyy-MM-dd",onChange:e=>{a(e)},renderInput:e=>Object(W.jsx)(_.a,{...e,fullWidth:!0,sx:{maxWidth:{md:300}}})}),Object(W.jsx)(A.a,{label:"Date de fin",value:l,inputFormat:"yyyy-MM-dd",onChange:e=>{n(e)},renderInput:e=>Object(W.jsx)(_.a,{...e,fullWidth:!0,sx:{maxWidth:{md:300}}})}),Object(W.jsx)(V.a,{title:"Filter list",children:Object(W.jsx)(q.a,{sx:{py:2,px:3},loading:j,variant:"contained",onClick:i,children:"Filtrer"})})]})}var E=a(383),G=a.n(E),J=a(32),N=(a(1249),a(1246)),H=a.n(N),Q=a(1214),K=a(553),U=a(1185),X=a(1186);function Y(e){var t;let{onDelete:a,factuId:n}=e;const l=Object(c.useRef)(null),[o,r]=Object(c.useState)(!1);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Q.a,{ref:l,onClick:()=>r(!0),children:Object(W.jsx)(i.a,{icon:H.a,width:20,height:20})}),Object(W.jsx)(K.a,{open:o,anchorEl:l.current,onClose:()=>r(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(W.jsxs)(z.a,{component:J.b,to:"".concat(null===(t=y.a.company)||void 0===t?void 0:t.companyFactu,"/").concat(n,"/pdf"),sx:{color:"text.secondary"},children:[Object(W.jsx)(U.a,{children:Object(W.jsx)(i.a,{icon:G.a,width:24,height:24})}),Object(W.jsx)(X.a,{primary:"Voir en PDF",primaryTypographyProps:{variant:"body2"}})]})})]})}var Z=a(223),$=a(46);const ee=[{id:"name",label:"Compagnie",alignRight:!1},{id:"price",label:"Prix",alignRight:!1},{id:"nb_agents",label:"nombres agents",alignRight:!1},{id:"total",label:"Total",alignRight:!1},{id:""}];function te(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function ae(){var e;const{user:t}=Object($.a)(),{themeStretch:a}=Object(C.a)(),i=(Object(r.a)(),Object(m.c)()),{facturations:R,compagnies:k}=Object(m.d)((e=>e.user)),[D,F]=Object(c.useState)(0),[M,T]=Object(c.useState)("asc"),[_,z]=Object(c.useState)([]),[V,q]=Object(c.useState)("first_name"),[A,E]=Object(c.useState)(""),[G,J]=Object(c.useState)(25),N=new Date,H=Object(l.a)(N,-1),[Q,K]=Object(c.useState)(Object(o.a)(H)),[U,X]=Object(c.useState)(Object(o.a)(N)),[ae,ne]=Object(c.useState)(0),[ie,ce]=Object(c.useState)(!1);Object(c.useEffect)((()=>{i(Object(f.p)())}),[i]);const le=D>0?Math.max(0,(1+D)*G-R.length):0,oe=function(e,t,a){const i=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===i||void 0===i||i.sort(((e,a)=>{const n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a?Object(n.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.agent_first_name.toLowerCase().indexOf(a.toLowerCase())))):null===i||void 0===i?void 0:i.map((e=>e[0]))}(R,function(e,t){return"desc"===e?(e,a)=>te(e,a,t):(e,a)=>-te(e,a,t)}(M,V),A),re=0===(null===oe||void 0===oe?void 0:oe.length);return Object(W.jsx)(S.a,{title:"Facturation: List | RLP Center Lotto",children:Object(W.jsxs)(d.a,{maxWidth:!a&&"lg",children:[Object(W.jsx)(L.a,{heading:"Liste Facturation",links:[{name:"Dashboard",href:y.a.root},{name:"Facturation",href:y.a.company.companyFactu},{name:"Listes"}]}),Object(W.jsxs)(s.a,{children:[Object(W.jsx)(B,{value:Q,value1:U,value2:ae,setValue2:ne,compagnies:k,onChangeDate1:e=>{K(e)},onChangeDate2:e=>{X(e)},handleGo:async()=>{ce(!0),await i(Object(f.s)(Object(Z.a)(Q),Object(Z.a)(U),ae)),ce(!1)},loading:ie,setLoading:ce}),Object(W.jsx)(w.a,{children:Object(W.jsx)(j.a,{sx:{minWidth:800},children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(I,{order:M,orderBy:V,headLabel:ee,rowCount:null===R||void 0===R?void 0:R.length,numSelected:null===_||void 0===_?void 0:_.length,onRequestSort:(e,t)=>{T(V===t&&"asc"===M?"desc":"asc"),q(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===R||void 0===R?void 0:R.map((e=>e.id));z(e)}else z([])}}),Object(W.jsxs)(h.a,{children:[null===(e=G>0?null===oe||void 0===oe?void 0:oe.slice(D*G,D*G+G):oe)||void 0===e?void 0:e.map((e=>{const t=-1!==_.indexOf(null===e||void 0===e?void 0:e.id);return Object(W.jsxs)(b.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:[Object(W.jsx)(O.a,{component:"th",scope:"row",padding:"none",children:Object(W.jsxs)(x.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(W.jsx)(g.a,{alt:null===e||void 0===e?void 0:e.companyName,src:null===e||void 0===e?void 0:e.company_photo}),Object(W.jsx)(p.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyName})]})}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.price}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.agents}),Object(W.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.total}),Object(W.jsx)(O.a,{align:"right",children:Object(W.jsx)(Y,{factuId:null===e||void 0===e?void 0:e.id})})]},null===e||void 0===e?void 0:e.id)})),le>0&&Object(W.jsx)(b.a,{style:{height:53*le},children:Object(W.jsx)(O.a,{colSpan:6})})]}),re&&Object(W.jsx)(h.a,{children:Object(W.jsx)(b.a,{children:Object(W.jsx)(O.a,{align:"center",colSpan:6,sx:{py:3},children:Object(W.jsx)(P.a,{searchQuery:A})})})})]})})}),Object(W.jsx)(v.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===R||void 0===R?void 0:R.length,rowsPerPage:G,page:D,onPageChange:(e,t)=>{F(t)},onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),F(0)}})]})]})})}}}]);
//# sourceMappingURL=76.cac6c298.chunk.js.map