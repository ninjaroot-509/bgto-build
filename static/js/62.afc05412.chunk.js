(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[62],{1412:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return J}));var i=n(1561),a=n(1421),c=n(1422),o=n(1423),l=n(1939),r=n(557),s=n(0);function d(e){let{order:t,orderBy:n,rowCount:d,headLabel:j,numSelected:h,onRequestSort:b,onSelectAllClick:u}=e;return Object(s.jsx)(a.a,{children:Object(s.jsx)(c.a,{children:j.map((e=>{return Object(s.jsx)(o.a,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:Object(s.jsxs)(l.a,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(a=e.id,e=>{b(e,a)}),children:[e.label,n===e.id?Object(s.jsx)(r.a,{sx:{...i.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var a}))})})}var j=n(27),h=n(298),b=n.n(h),u=n(4),p=n(1224),O=n(1210),g=n(1229),v=n(1227),x=n(1204);const m=Object(u.a)(p.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),f=Object(u.a)(O.a)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function y(e){let{loading:t,handleGo:n,filterName:i,onFilterName:a}=e;return Object(s.jsxs)(m,{children:[Object(s.jsx)(f,{value:i,onChange:a,placeholder:"Rechercher compagnie?...",startAdornment:Object(s.jsx)(g.a,{position:"start",children:Object(s.jsx)(r.a,{component:j.a,icon:b.a,sx:{color:"text.disabled"}})})}),Object(s.jsx)(v.a,{title:"Filter list",children:Object(s.jsx)(x.a,{sx:{py:2,px:3},loading:t,variant:"contained",onClick:n,children:"Rafra\xeechir"})})]})}var w=n(1),C=n(1243),S=n.n(C),k=(n(1262),n(1263),n(32)),R=n(1249),P=n.n(R),_=n(1246),L=n.n(_),I=n(159),N=n(1214),A=n(553),W=n(1230),D=n(1185),F=n(1186),T=n(222),q=n(103),z=n(63),B=n(22),E=(n(76),n(46)),G=n(297);function J(e){var t;let{block:n,companyId:i}=e;const a=Object(w.useRef)(null),{user:c}=Object(E.a)(),[o,l]=Object(w.useState)(!1),{enqueueSnackbar:r}=Object(I.b)(),d=Object(q.c)();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(N.a,{ref:a,onClick:()=>l(!0),children:Object(s.jsx)(j.a,{icon:L.a,width:20,height:20})}),Object(s.jsxs)(A.a,{open:o,anchorEl:a.current,onClose:()=>l(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(G.a)(null===c||void 0===c?void 0:c.perms,"delete_company")&&Object(s.jsxs)(W.a,{onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir supprimer?")&&(async()=>{l(!1);const e={companyId:i};await T.a.handleDeleteCompagnie(e),d(Object(z.p)()),r("delete with success",{variant:"success"})})()},sx:{color:"red"},children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(j.a,{icon:P.a,width:24,height:24})}),Object(s.jsx)(F.a,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]}),Object(G.a)(null===c||void 0===c?void 0:c.perms,"change_company")&&Object(s.jsxs)(W.a,{component:k.b,to:"".concat(null===(t=B.a.company)||void 0===t?void 0:t.root,"/").concat(i,"/edit"),sx:{color:"text.secondary"},children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(j.a,{icon:S.a,width:24,height:24})}),Object(s.jsx)(F.a,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]})]})]})}},1882:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var i=n(158),a=n(27),c=n(1),o=n(1242),l=n.n(o),r=n(32),s=n(49),d=n(1226),j=n(1201),h=n(1255),b=n(1419),u=n(1420),p=n(1424),O=n(1422),g=n(1423),v=n(1221),x=n(1206),m=n(296),f=n(1276),y=n(103),w=n(63),C=n(22),S=n(91),k=n(380),R=n(381),P=n(68),_=n(1244),L=n(1241),I=n(1412),N=n(46),A=n(297),W=n(0);const D=[{id:"name",label:"Nom complet",alignRight:!1},{id:"ref_code",label:"Ref_code",alignRight:!1},{id:"phone",label:"T\xe9l\xe9phone",alignRight:!1},{id:"country",label:"Pays",alignRight:!1},{id:"city",label:"Ville",alignRight:!1},{id:"addresse_complet",label:"Adresse compl\xe8te",alignRight:!1},{id:"block",label:"Block",alignRight:!1},{id:""}];function F(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function T(){var e,t,n;const{user:o}=Object(N.a)(),{themeStretch:T}=Object(S.a)(),q=Object(s.a)(),z=Object(y.c)(),{compagnies:B}=Object(y.d)((e=>e.user)),[E,G]=Object(c.useState)(0),[J,M]=Object(c.useState)("asc"),[Q,V]=Object(c.useState)([]),[H,K]=Object(c.useState)("first_name"),[U,X]=Object(c.useState)(""),[Y,Z]=Object(c.useState)(25),[$,ee]=Object(c.useState)(!1),te=async()=>{ee(!0),await z(Object(w.p)()),ee(!1)};Object(c.useEffect)((()=>{te()}),[z]);const ne=E>0?Math.max(0,(1+E)*Y-B.length):0,ie=function(e,t,n){const a=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===a||void 0===a||a.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n?Object(i.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.first_name.toLowerCase().indexOf(n.toLowerCase())))):null===a||void 0===a?void 0:a.map((e=>e[0]))}(B,function(e,t){return"desc"===e?(e,n)=>F(e,n,t):(e,n)=>-F(e,n,t)}(J,H),U),ae=0===(null===ie||void 0===ie?void 0:ie.length);return Object(W.jsx)(k.a,{title:"Compagnies: List | RLP Center Lotto",children:Object(W.jsxs)(d.a,{maxWidth:!T&&"lg",children:[Object(W.jsx)(L.a,{heading:"Liste des Compagnies",links:[{name:"Dashboard",href:C.a.root},{name:"Compagnies",href:null===(e=C.a.company)||void 0===e?void 0:e.root},{name:"Listes"}],action:Object(A.a)(null===o||void 0===o?void 0:o.perms,"add_company")&&Object(W.jsx)(j.a,{variant:"contained",component:r.b,to:null===(t=C.a.company)||void 0===t?void 0:t.newCompany,startIcon:Object(W.jsx)(a.a,{icon:l.a}),children:"Ajouter Compagnie"})}),Object(W.jsxs)(h.a,{children:[Object(W.jsx)(I.b,{handleGo:te,loading:$,filterName:U,onFilterName:e=>{X(e.target.value)}}),Object(W.jsx)(P.a,{children:Object(W.jsx)(b.a,{sx:{minWidth:800},children:Object(W.jsxs)(u.a,{children:[Object(W.jsx)(I.a,{order:J,orderBy:H,headLabel:D,rowCount:null===B||void 0===B?void 0:B.length,numSelected:null===Q||void 0===Q?void 0:Q.length,onRequestSort:(e,t)=>{M(H===t&&"asc"===J?"desc":"asc"),K(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===B||void 0===B?void 0:B.map((e=>e.id));V(e)}else V([])}}),Object(W.jsxs)(p.a,{children:[null===(n=Y>0?null===ie||void 0===ie?void 0:ie.slice(E*Y,E*Y+Y):ie)||void 0===n?void 0:n.map((e=>{const t=-1!==Q.indexOf(null===e||void 0===e?void 0:e.id);return Object(W.jsxs)(O.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:[Object(W.jsx)(g.a,{component:"th",scope:"row",padding:"none",children:Object(W.jsxs)(v.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(W.jsx)(x.a,{alt:null===e||void 0===e?void 0:e.companyname,src:null===e||void 0===e?void 0:e.user_photo}),Object(W.jsx)(m.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyname})]})}),Object(W.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.ref_code}),Object(W.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.phone}),Object(W.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.country_name}),Object(W.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.city_name}),Object(W.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.addresse_complet}),Object(W.jsx)(g.a,{align:"left",children:Object(W.jsx)(R.a,{variant:"light"===q.palette.mode?"ghost":"filled",color:(null===e||void 0===e?void 0:e.block)?"error":"success",children:null!==e&&void 0!==e&&e.block?"Oui":"Non"})}),Object(W.jsx)(g.a,{align:"right"})]},null===e||void 0===e?void 0:e.id)})),ne>0&&Object(W.jsx)(O.a,{style:{height:53*ne},children:Object(W.jsx)(g.a,{colSpan:6})})]}),ae&&Object(W.jsx)(p.a,{children:Object(W.jsx)(O.a,{children:Object(W.jsx)(g.a,{align:"center",colSpan:6,sx:{py:3},children:Object(W.jsx)(_.a,{searchQuery:U})})})})]})})}),Object(W.jsx)(f.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===B||void 0===B?void 0:B.length,rowsPerPage:Y,page:E,onPageChange:(e,t)=>{G(t)},onRowsPerPageChange:e=>{Z(parseInt(e.target.value,10)),G(0)}})]})]})})}}}]);
//# sourceMappingURL=62.afc05412.chunk.js.map