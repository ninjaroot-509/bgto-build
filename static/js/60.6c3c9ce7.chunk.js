(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[60],{1357:function(e,a,n){"use strict";n.d(a,"a",(function(){return M}));var l=n(226),o=n(1),i=n(159),r=n(19),t=n(225),c=n(1208),s=n(1255),d=n(1221),u=n(557),p=n(296),m=n(1236),b=n(1233),j=n(1229),v=n(1214),h=n(1232),g=n(1266),x=n(1204),O=n(27),_=n(383),y=n.n(_),I=(n(192),n(384)),f=n.n(I),q=n(4),w=n(222),P=n(22),k=(n(381),n(1358)),C=n(1252),F=n(103),S=n(63),B=n(1240),W=(n(297),n(46)),T=(n(76),n(0));Object(q.a)("div")((e=>{let{theme:a}=e;return{...a.typography.subtitle2,minWidth:160}}));function M(e){let{isEdit:a,currentCompagnie:n}=e;const _=Object(r.o)(),I=Object(F.c)(),{user:q}=Object(W.a)(),{enqueueSnackbar:M}=Object(i.b)(),{countries:N}=Object(F.d)((e=>e.user)),[E,A]=Object(o.useState)(!1),[L,R]=Object(o.useState)(!1),V=l.d().shape({companyname:l.e().required("Company Name is required"),username:l.e().required("Pseudoname is required"),first_name:l.e().required("Name is required"),last_name:l.e().required("Name is required"),phone:l.c().required("Phone is required"),delete_fiche_min:l.c().required("minute to delete fiche is required"),country_id:l.e().required("Country is required"),city_id:l.e().required("City is required"),addresse_complet:l.e().required("Address is required"),description:l.e().required("Description is required"),mariage_min:l.c().required("Mariage min is required"),mariage_nb:l.c().required("Mariage Nb is required"),price_pos:l.c().required("prix pos is required")}),D=Object(t.c)({enableReinitialize:!0,initialValues:{companyname:(null===n||void 0===n?void 0:n.companyname)||null,username:(null===n||void 0===n?void 0:n.username)||null,first_name:(null===n||void 0===n?void 0:n.first_name)||null,last_name:(null===n||void 0===n?void 0:n.last_name)||null,delete_fiche_min:(null===n||void 0===n?void 0:n.delete_fiche_min)||null,phone:(null===n||void 0===n?void 0:n.phone)||null,password:null,country_id:(null===n||void 0===n?void 0:n.country)||null,addresse_complet:(null===n||void 0===n?void 0:n.addresse_complet)||null,city_id:(null===n||void 0===n?void 0:n.city)||null,description:(null===n||void 0===n?void 0:n.description)||null,mariage_min:(null===n||void 0===n?void 0:n.mariage_min)||null,mariage_nb:(null===n||void 0===n?void 0:n.mariage_nb)||null,price_pos:(null===n||void 0===n?void 0:n.price_pos)||0,mariage_gratuit:(null===n||void 0===n?void 0:n.mariage_gratuit)||!1,mariage_option:(null===n||void 0===n?void 0:n.mariage_option)||!1,patente:(null===n||void 0===n?void 0:n.patente)||!1,qrcode:(null===n||void 0===n?void 0:n.qrcode)||!1,whatsapp:(null===n||void 0===n?void 0:n.whatsapp)||!1,boulereverce:(null===n||void 0===n?void 0:n.boulereverce)||!1,companyphoneIn:(null===n||void 0===n?void 0:n.companyphoneIn)||!1,agentnameIn:(null===n||void 0===n?void 0:n.agentnameIn)||!1,agentaddressIn:(null===n||void 0===n?void 0:n.agentaddressIn)||!1,multitirageIn:(null===n||void 0===n?void 0:n.multitirageIn)||!1,mariageautoIn:(null===n||void 0===n?void 0:n.mariageautoIn)||!1,l3autoIn:(null===n||void 0===n?void 0:n.l3autoIn)||!1,l4autoIn:(null===n||void 0===n?void 0:n.l4autoIn)||!1,boulepaireIn:(null===n||void 0===n?void 0:n.boulepaireIn)||!1,pointeIn:(null===n||void 0===n?void 0:n.pointeIn)||!1,user_photo:(null===n||void 0===n?void 0:n.user_photo)||null,block:null===n||void 0===n?void 0:n.block,companyId:(null===n||void 0===n?void 0:n.id)||null,perms:(null===n||void 0===n?void 0:n.perms)||[]},validationSchema:V,onSubmit:async(e,n)=>{let{setSubmitting:l,resetForm:o,setErrors:i}=n;try{var r;const n=new FormData;n.append("companyname",e.companyname),n.append("username",e.username),!0===L&&n.append("user_photo",e.user_photo),n.append("first_name",e.first_name),n.append("last_name",e.last_name),n.append("delete_fiche_min",e.delete_fiche_min),n.append("phone",e.phone),n.append("password",e.password),n.append("country_id",e.country_id),n.append("addresse_complet",e.addresse_complet),n.append("city_id",e.city_id),n.append("description",e.description),n.append("mariage_min",e.mariage_min),n.append("mariage_nb",e.mariage_nb),n.append("price_pos",e.price_pos),n.append("companyId",e.companyId),n.append("perms",JSON.stringify(null===e||void 0===e?void 0:e.perms.map((e=>e.codename)))),n.append("mariage_gratuit",e.mariage_gratuit?"True":"False"),n.append("mariage_option",e.mariage_option?"True":"False"),n.append("patente",e.patente?"True":"False"),n.append("qrcode",e.qrcode?"True":"False"),n.append("whatsapp",e.whatsapp?"True":"False"),n.append("boulereverce",e.boulereverce?"True":"False"),n.append("companyphoneIn",e.companyphoneIn?"True":"False"),n.append("agentnameIn",e.agentnameIn?"True":"False"),n.append("agentaddressIn",e.agentaddressIn?"True":"False"),n.append("multitirageIn",e.multitirageIn?"True":"False"),n.append("mariageautoIn",e.mariageautoIn?"True":"False"),n.append("l3autoIn",e.l3autoIn?"True":"False"),n.append("l4autoIn",e.l4autoIn?"True":"False"),n.append("boulepaireIn",e.boulepaireIn?"True":"False"),n.append("pointeIn",e.pointeIn?"True":"False"),n.append("block",e.block?"True":"False"),a?await w.a.handleModifyCompagnie(n):await w.a.handleAddCompagnie(n),o(),l(!1),M(a?"Mettre \xe0 jour avec succ\xe8s":"Cr\xe9er avec succ\xe8s",{variant:"success"}),Object(S.p)(),_(null===(r=P.a.company)||void 0===r?void 0:r.root)}catch(t){null!==t&&void 0!==t&&t.message?M(null===t||void 0===t?void 0:t.message,{variant:"error"}):alert(JSON.stringify(t)),l(!1),i(t)}}});Object(o.useEffect)((()=>{I(Object(S.r)())}),[I]);const{errors:J,values:z,touched:U,handleSubmit:G,isSubmitting:Q,setFieldValue:H,getFieldProps:K}=D,[X,Y]=o.useState((null===q||void 0===q?void 0:q.perms)||[]),Z=Object(o.useCallback)((e=>{const a=e[0];a&&H("user_photo",Object.assign(a,{preview:URL.createObjectURL(a)})),R(!0)}),[H]);return Object(T.jsx)(t.b,{value:D,children:Object(T.jsx)(t.a,{noValidate:!0,autoComplete:"off",onSubmit:G,children:Object(T.jsx)(c.a,{container:!0,spacing:3,children:Object(T.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(T.jsx)(s.a,{sx:{p:3},children:Object(T.jsxs)(d.a,{spacing:3,children:[Object(T.jsx)(d.a,{children:Object(T.jsxs)(u.a,{sx:{mb:5},children:[Object(T.jsx)(C.a,{accept:"image/*",file:z.user_photo,maxSize:3145728,onDrop:Z,error:Boolean(U.user_photo&&J.user_photo),caption:Object(T.jsxs)(p.a,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png",Object(T.jsx)("br",{})," max size of ",Object(B.b)(3145728)]})}),Object(T.jsx)(m.a,{error:!0,sx:{px:2,textAlign:"center"},children:U.user_photo&&J.user_photo})]})}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(b.a,{fullWidth:!0,label:"Nom de l'entreprise",placeholder:"Entrer le nom de l'entreprise",...K("companyname"),error:Boolean(U.companyname&&J.companyname)}),Object(T.jsx)(b.a,{fullWidth:!0,label:"Pseudoname",placeholder:"Entrer le pseudoname",...K("username"),error:Boolean(U.username&&J.username)})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(b.a,{fullWidth:!0,label:"Pr\xe9nom",placeholder:"Entrer le pr\xe9nom",...K("first_name"),error:Boolean(U.first_name&&J.first_name)}),Object(T.jsx)(b.a,{fullWidth:!0,label:"Nom de famille",placeholder:"Entrer le nom de famille",...K("last_name"),error:Boolean(U.last_name&&J.last_name)})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(b.a,{fullWidth:!0,label:"Num\xe9ro de t\xe9l\xe9phone",...K("phone")}),Object(T.jsxs)(b.a,{select:!0,fullWidth:!0,label:"Pays",placeholder:"Choisir le pays",...K("country_id"),SelectProps:{native:!0},error:Boolean(U.country_id&&J.country_id),children:[Object(T.jsx)("option",{value:""}),null===N||void 0===N?void 0:N.map((e=>Object(T.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(b.a,{fullWidth:!0,label:"Ville",...K("city_id"),error:Boolean(U.city_id&&J.city_id)}),Object(T.jsx)(b.a,{fullWidth:!0,label:"Addresse complete",...K("addresse_complet"),error:Boolean(U.addresse_complet&&J.addresse_complet)})]}),Object(T.jsx)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:Object(T.jsx)(b.a,{fullWidth:!0,label:"Prix Par POS",...K("price_pos"),error:Boolean(U.price_pos&&J.price_pos)})}),Object(T.jsx)(d.a,{children:Object(T.jsx)(b.a,{fullWidth:!0,autoComplete:"current-password",type:E?"text":"password",label:"Mot de passe",...K("password"),InputProps:{endAdornment:Object(T.jsx)(j.a,{position:"end",children:Object(T.jsx)(v.a,{edge:"end",onClick:()=>A((e=>!e)),children:Object(T.jsx)(O.a,{icon:E?y.a:f.a})})})},error:Boolean(U.password&&J.password)})}),Object(T.jsx)(b.a,{...K("description"),fullWidth:!0,multiline:!0,minRows:4,maxRows:4,label:"Description",error:Boolean(U.description&&J.description)}),Object(T.jsx)(d.a,{children:Object(T.jsx)(b.a,{fullWidth:!0,label:"Minutes pour supprimer un fiche",...K("delete_fiche_min"),error:Boolean(U.delete_fiche_min&&J.delete_fiche_min)})}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(b.a,{fullWidth:!0,label:"Mariage valeur",...K("mariage_min"),error:Boolean(U.mariage_min&&J.mariage_min)}),Object(T.jsx)(b.a,{fullWidth:!0,label:"Mariage quantite",...K("mariage_nb"),error:Boolean(U.mariage_nb&&J.mariage_nb)}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("mariage_gratuit"),checked:null===z||void 0===z?void 0:z.mariage_gratuit,color:null!==z&&void 0!==z&&z.mariage_gratuit?"success":"primary"}),labelPlacement:"start",label:"Mariage Gratuit"})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("patente"),checked:null===z||void 0===z?void 0:z.patente,color:null!==z&&void 0!==z&&z.patente?"success":"primary"}),labelPlacement:"start",label:"Patente"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("mariage_option"),checked:null===z||void 0===z?void 0:z.mariage_option,color:null!==z&&void 0!==z&&z.mariage_option?"success":"primary"}),labelPlacement:"start",label:"Mariage Option"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("qrcode"),checked:null===z||void 0===z?void 0:z.qrcode,color:null!==z&&void 0!==z&&z.qrcode?"success":"primary"}),labelPlacement:"start",label:"QrCode"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("whatsapp"),checked:null===z||void 0===z?void 0:z.whatsapp,color:null!==z&&void 0!==z&&z.whatsapp?"success":"primary"}),labelPlacement:"start",label:"Whatsapp"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("boulereverce"),checked:null===z||void 0===z?void 0:z.boulereverce,color:null!==z&&void 0!==z&&z.boulereverce?"success":"primary"}),labelPlacement:"start",label:"Boule a revers"})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("companyphoneIn"),checked:null===z||void 0===z?void 0:z.companyphoneIn,color:null!==z&&void 0!==z&&z.companyphoneIn?"success":"primary"}),labelPlacement:"start",label:"Company Phone"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("agentnameIn"),checked:null===z||void 0===z?void 0:z.agentnameIn,color:null!==z&&void 0!==z&&z.agentnameIn?"success":"primary"}),labelPlacement:"start",label:"Vendeur name"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("agentaddressIn"),checked:null===z||void 0===z?void 0:z.agentaddressIn,color:null!==z&&void 0!==z&&z.agentaddressIn?"success":"primary"}),labelPlacement:"start",label:"Vendeur addresse"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("multitirageIn"),checked:null===z||void 0===z?void 0:z.multitirageIn,color:null!==z&&void 0!==z&&z.multitirageIn?"success":"primary"}),labelPlacement:"start",label:"Multi tirage"})]}),Object(T.jsxs)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("boulepaireIn"),checked:null===z||void 0===z?void 0:z.boulepaireIn,color:null!==z&&void 0!==z&&z.boulepaireIn?"success":"primary"}),labelPlacement:"start",label:"Boule Paire"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("pointeIn"),checked:null===z||void 0===z?void 0:z.pointeIn,color:null!==z&&void 0!==z&&z.pointeIn?"success":"primary"}),labelPlacement:"start",label:"Pointe auto"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("mariageautoIn"),checked:null===z||void 0===z?void 0:z.mariageautoIn,color:null!==z&&void 0!==z&&z.mariageautoIn?"success":"primary"}),labelPlacement:"start",label:"Mariage auto"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("l3autoIn"),checked:null===z||void 0===z?void 0:z.l3autoIn,color:null!==z&&void 0!==z&&z.l3autoIn?"success":"primary"}),labelPlacement:"start",label:"Lotto 3 auto"}),Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("l4autoIn"),checked:null===z||void 0===z?void 0:z.l4autoIn,color:null!==z&&void 0!==z&&z.l4autoIn?"success":"primary"}),labelPlacement:"start",label:"Lotto 4 auto"})]}),Object(T.jsx)(d.a,{direction:{xs:"column",md:"row"},spacing:2,children:Object(T.jsx)(h.a,{control:Object(T.jsx)(g.a,{...K("block"),checked:null===z||void 0===z?void 0:z.block,color:null!==z&&void 0!==z&&z.block?"success":"primary"}),labelPlacement:"start",label:"Block"})}),Object(T.jsx)(d.a,{children:Object(T.jsx)(k.a,{leftArr:X,right:z.perms,setLeft:Y,setRight:e=>{D.setFieldValue("perms",e)}})}),Object(T.jsx)(u.a,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:Object(T.jsx)(x.a,{type:"submit",variant:"contained",loading:Q,children:a?"Sauvegarder les modifications":"Cr\xe9er Compagnie"})})]})})})})})})}},1883:function(e,a,n){"use strict";n.r(a),n.d(a,"default",(function(){return m}));var l=n(1),o=n(19),i=n(1226),r=n(103),t=n(63),c=n(22),s=n(91),d=n(380),u=n(1241),p=(n(1357),n(0));function m(){var e;const{themeStretch:a}=Object(s.a)(),n=Object(r.c)(),{pathname:m}=Object(o.m)(),{compagnieId:b}=Object(o.q)(),{compagnies:j}=Object(r.d)((e=>e.user)),v=m.includes("edit"),h=j.find((e=>(null===e||void 0===e?void 0:e.id)===Number(b))),[g,x]=Object(l.useState)(!1);return Object(l.useEffect)((()=>{h&&x(!0)}),[h]),Object(l.useEffect)((()=>{n(Object(t.p)())}),[]),Object(p.jsx)(d.a,{title:"Compagnie: Cr\xe9er un nouvel compagnie | RLP Center Lotto",children:Object(p.jsx)(i.a,{maxWidth:!a&&"lg",children:Object(p.jsx)(u.a,{heading:v?"Modifier compagnie":"Cr\xe9er un nouvel compagnie",links:[{name:"Dashboard",href:c.a.root},{name:"compagnie",href:null===(e=c.a.company)||void 0===e?void 0:e.root},{name:v?"Modification":"Nouvel Compagnie"}]})})})}}}]);
//# sourceMappingURL=60.6c3c9ce7.chunk.js.map