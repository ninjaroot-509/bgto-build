(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[75],{1917:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return be}));var a=n(158),i=n(27),c=n(1),o=n(1242),l=n.n(o),r=n(32),d=n(49),s=n(1226),j=n(1201),b=n(1255),h=n(1419),u=n(1420),O=n(1424),p=n(1422),v=n(1423),m=n(1221),x=n(1206),g=n(296),y=n(1276),f=n(103),w=n(63),S=n(22),C=n(91),P=n(380),k=(n(381),n(69)),R=n(1244),_=n(1241),L=n(1561),I=n(1421),q=n(1939),D=n(557),N=n(0);function F(e){let{order:t,orderBy:n,rowCount:a,headLabel:i,numSelected:c,onRequestSort:o,onSelectAllClick:l}=e;return Object(N.jsx)(I.a,{children:Object(N.jsx)(p.a,{children:i.map((e=>{return Object(N.jsx)(v.a,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:Object(N.jsxs)(q.a,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(a=e.id,e=>{o(e,a)}),children:[e.label,n===e.id?Object(N.jsx)(D.a,{sx:{...L.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var a}))})})}var W=n(298),A=n.n(W),z=n(4),E=n(1224),H=n(1210),T=n(1229),B=n(1227),G=n(1204);const J=Object(z.a)(E.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),M=Object(z.a)(H.a)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function Q(e){let{loading:t,handleGo:n,filterName:a,onFilterName:c}=e;return Object(N.jsxs)(J,{children:[Object(N.jsx)(M,{value:a,onChange:c,placeholder:"Rechercher compagnie?...",startAdornment:Object(N.jsx)(T.a,{position:"start",children:Object(N.jsx)(D.a,{component:i.a,icon:A.a,sx:{color:"text.disabled"}})})}),Object(N.jsx)(B.a,{title:"Filter list",children:Object(N.jsx)(G.a,{sx:{py:2,px:3},loading:t,variant:"contained",onClick:n,children:"Rafra\xeechir"})})]})}var K=n(1243),U=n.n(K),V=(n(1262),n(1263),n(1249)),X=n.n(V),Y=n(1246),Z=n.n(Y),$=n(159),ee=n(1214),te=n(553),ne=n(1230),ae=n(1185),ie=n(1186),ce=n(222),oe=(n(76),n(46)),le=n(297);function re(e){var t;let{block:n,paymentId:a}=e;const o=Object(c.useRef)(null),{user:l}=Object(oe.a)(),[d,s]=Object(c.useState)(!1),{enqueueSnackbar:j}=Object($.b)(),b=Object(f.c)();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ee.a,{ref:o,onClick:()=>s(!0),children:Object(N.jsx)(i.a,{icon:Z.a,width:20,height:20})}),Object(N.jsxs)(te.a,{open:d,anchorEl:o.current,onClose:()=>s(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(le.a)(null===l||void 0===l?void 0:l.perms,"delete_payment")&&Object(N.jsxs)(ne.a,{onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir supprimer?")&&(async()=>{s(!1);const e={paymentId:a};await ce.a.handleDeleteCompanyPayment(e),b(Object(w.q)()),j("delete with success",{variant:"success"})})()},sx:{color:"red"},children:[Object(N.jsx)(ae.a,{children:Object(N.jsx)(i.a,{icon:X.a,width:24,height:24})}),Object(N.jsx)(ie.a,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]}),Object(le.a)(null===l||void 0===l?void 0:l.perms,"change_payment")&&Object(N.jsxs)(ne.a,{component:r.b,to:"".concat(null===(t=S.a.company)||void 0===t?void 0:t.companyPayment,"/").concat(a,"/edit"),sx:{color:"text.secondary"},children:[Object(N.jsx)(ae.a,{children:Object(N.jsx)(i.a,{icon:U.a,width:24,height:24})}),Object(N.jsx)(ie.a,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]})]})]})}var de=n(223);const se=[{id:"name",label:"Compagnie",alignRight:!1},{id:"nb_agent",label:"nb_agent",alignRight:!1},{id:"montant",label:"montant",alignRight:!1},{id:"balance",label:"balance",alignRight:!1},{id:"created_on",label:"Date Start",alignRight:!1},{id:"created_on",label:"Date Fin",alignRight:!1},{id:""}];function je(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function be(){var e,t,n;const{user:o}=Object(oe.a)(),{themeStretch:L}=Object(C.a)(),I=(Object(d.a)(),Object(f.c)()),{companyPayment:q}=Object(f.d)((e=>e.user)),[D,W]=Object(c.useState)(0),[A,z]=Object(c.useState)("asc"),[E,H]=Object(c.useState)([]),[T,B]=Object(c.useState)("created_on"),[G,J]=Object(c.useState)(""),[M,K]=Object(c.useState)(25),[U,V]=Object(c.useState)(!1),X=async()=>{V(!0),await I(Object(w.q)()),V(!1)};Object(c.useEffect)((()=>{X()}),[I]);const Y=D>0?Math.max(0,(1+D)*M-q.length):0,Z=function(e,t,n){const i=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===i||void 0===i||i.sort(((e,n)=>{const a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n?Object(a.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.first_name.toLowerCase().indexOf(n.toLowerCase())))):null===i||void 0===i?void 0:i.map((e=>e[0]))}(q,function(e,t){return"desc"===e?(e,n)=>je(e,n,t):(e,n)=>-je(e,n,t)}(A,T),G),$=0===(null===Z||void 0===Z?void 0:Z.length);return Object(N.jsx)(P.a,{title:"Historiques paiments: List | RLP Center Lotto",children:Object(N.jsxs)(s.a,{maxWidth:!L&&"lg",children:[Object(N.jsx)(_.a,{heading:"Liste des Historiques paiments",links:[{name:"Dashboard",href:S.a.root},{name:"Historiques paiments",href:null===(e=S.a.company)||void 0===e?void 0:e.companyPayment},{name:"Listes"}],action:Object(le.a)(null===o||void 0===o?void 0:o.perms,"add_payment")&&Object(N.jsx)(j.a,{variant:"contained",component:r.b,to:null===(t=S.a.company)||void 0===t?void 0:t.newCompanyPayment,startIcon:Object(N.jsx)(i.a,{icon:l.a}),children:"Ajouter Paiment"})}),Object(N.jsxs)(b.a,{children:[Object(N.jsx)(Q,{handleGo:X,loading:U,filterName:G,onFilterName:e=>{J(e.target.value)}}),Object(N.jsx)(k.a,{children:Object(N.jsx)(h.a,{sx:{minWidth:800},children:Object(N.jsxs)(u.a,{children:[Object(N.jsx)(F,{order:A,orderBy:T,headLabel:se,rowCount:null===q||void 0===q?void 0:q.length,numSelected:null===E||void 0===E?void 0:E.length,onRequestSort:(e,t)=>{z(T===t&&"asc"===A?"desc":"asc"),B(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===q||void 0===q?void 0:q.map((e=>e.id));H(e)}else H([])}}),Object(N.jsxs)(O.a,{children:[null===(n=M>0?null===Z||void 0===Z?void 0:Z.slice(D*M,D*M+M):Z)||void 0===n?void 0:n.map((e=>{const t=-1!==E.indexOf(null===e||void 0===e?void 0:e.id);return Object(N.jsxs)(p.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:[Object(N.jsx)(v.a,{component:"th",scope:"row",padding:"none",children:Object(N.jsxs)(m.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(N.jsx)(x.a,{alt:null===e||void 0===e?void 0:e.companyName,src:null===e||void 0===e?void 0:e.company_photo}),Object(N.jsx)(g.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyName})]})}),Object(N.jsx)(v.a,{align:"left",children:null===e||void 0===e?void 0:e.nb_agent}),Object(N.jsxs)(v.a,{align:"left",children:[null===e||void 0===e?void 0:e.montant," ",null===e||void 0===e?void 0:e.currency_code]}),Object(N.jsxs)(v.a,{align:"left",children:[null===e||void 0===e?void 0:e.balance," ",null===e||void 0===e?void 0:e.currency_code]}),Object(N.jsx)(v.a,{align:"left",children:Object(de.a)(null===e||void 0===e?void 0:e.created_on)}),Object(N.jsx)(v.a,{align:"left",children:Object(de.a)(null===e||void 0===e?void 0:e.expiry_date)}),Object(N.jsx)(v.a,{align:"right",children:Object(N.jsx)(re,{block:null===e||void 0===e?void 0:e.block,paymentId:null===e||void 0===e?void 0:e.id})})]},null===e||void 0===e?void 0:e.id)})),Y>0&&Object(N.jsx)(p.a,{style:{height:53*Y},children:Object(N.jsx)(v.a,{colSpan:6})})]}),$&&Object(N.jsx)(O.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(v.a,{align:"center",colSpan:6,sx:{py:3},children:Object(N.jsx)(R.a,{searchQuery:G})})})})]})})}),Object(N.jsx)(y.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===q||void 0===q?void 0:q.length,rowsPerPage:M,page:D,onPageChange:(e,t)=>{W(t)},onRowsPerPageChange:e=>{K(parseInt(e.target.value,10)),W(0)}})]})]})})}}}]);
//# sourceMappingURL=75.a125b79b.chunk.js.map