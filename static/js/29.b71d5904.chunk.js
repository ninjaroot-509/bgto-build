(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[29],{1240:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"b",(function(){return o}));i(158);var a=i(1250),n=i.n(a);function r(e){return n()(e).format(Number.isInteger(e)?"0,0":"0,0.00")}function l(e){return n()(e/100).format("0.0%")}function c(e){return n()(e).format()}function o(e){return n()(e).format("0.0 b")}},1241:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var a=i(158),n=i(557),r=i(296),l=i(1207),c=i(37),o=i(0);function s(e){let{links:t,action:i,heading:s,moreLink:d=[],sx:u,...j}=e;return Object(o.jsxs)(n.a,{sx:{mb:5,...u},children:[Object(o.jsxs)(n.a,{sx:{display:"flex",alignItems:"center"},children:[Object(o.jsxs)(n.a,{sx:{flexGrow:1},children:[Object(o.jsx)(r.a,{variant:"h4",gutterBottom:!0,children:s}),Object(o.jsx)(c.b,{links:t,...j})]}),i&&Object(o.jsx)(n.a,{sx:{flexShrink:0},children:i})]}),Object(o.jsx)(n.a,{sx:{mt:2},children:Object(a.isString)(d)?Object(o.jsx)(l.a,{href:d,target:"_blank",variant:"body2",children:d}):d.map((e=>Object(o.jsx)(l.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e)))})]})}},1244:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var a=i(558),n=i(296),r=i(0);function l(e){let{searchQuery:t="",...i}=e;return Object(r.jsxs)(a.a,{...i,children:[Object(r.jsx)(n.a,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Pas trouv\xe9"}),""!==t&&Object(r.jsxs)(n.a,{variant:"body2",align:"center",children:["Aucun r\xe9sultat trouv\xe9 pour \xa0",Object(r.jsxs)("strong",{children:['"',t,'"']}),". Essayez de v\xe9rifier les fautes de frappe ou d'utiliser des mots complets."]})]})}},1277:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return w})),i.d(t,"c",(function(){return P}));var a=i(1561),n=i(1421),r=i(1422),l=i(1423),c=i(1939),o=i(557),s=i(0);function d(e){let{order:t,orderBy:i,rowCount:d,headLabel:u,numSelected:j,onRequestSort:b,onSelectAllClick:m}=e;return Object(s.jsx)(n.a,{children:Object(s.jsx)(r.a,{children:u.map((e=>{return Object(s.jsx)(l.a,{align:e.align,sortDirection:i===e.id&&t,children:Object(s.jsxs)(c.a,{hideSortIcon:!0,active:i===e.id,direction:i===e.id?t:"asc",onClick:(n=e.id,e=>{b(e,n)}),children:[e.label,i===e.id?Object(s.jsx)(o.a,{sx:{...a.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))})})}var u=i(27),j=i(298),b=i.n(j),m=i(4),h=i(1210),v=i(1221),x=i(1233),O=i(1230),f=i(1229),p=i(1227),g=i(1204),S=i(1911);const y=Object(m.a)(h.a)((e=>{let{theme:t}=e;return{transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:200,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}})),M=130;function w(e){var t,i,a;let{filterName:n,onFilterName:r,onChangeDate1:l,onChangeDate2:c,handleGo:d,value:j,value1:m,value2:h,value3:w,value4:N,setValue2:T,setValue3:C,setValue4:k,loading:F,setLoading:L,agents:A,surcussales:_,infoTirages:R}=e;const G=window.localStorage.getItem("role");return Object(s.jsxs)(v.a,{spacing:2,direction:{xs:"column",md:"row"},sx:{py:2.5,px:3},children:[Object(s.jsx)(x.a,{fullWidth:!0,select:!0,label:"Tirage",value:h,onChange:e=>T(e.target.value),SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{maxWidth:{md:M},textTransform:"capitalize"},children:null===(t=[{id:0,name:"Tout"},...R])||void 0===t?void 0:t.map((e=>Object(s.jsx)(O.a,{value:null===e||void 0===e?void 0:e.id,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)))}),"supervisor"!==G&&Object(s.jsx)(x.a,{fullWidth:!0,select:!0,label:"Surcussale",value:w,onChange:e=>C(e.target.value),SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{maxWidth:{md:M},textTransform:"capitalize"},children:null===(i=[{id:0,addresse_complet:"Tout"},..._])||void 0===i?void 0:i.map((e=>Object(s.jsx)(O.a,{value:null===e||void 0===e?void 0:e.id,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.addresse_complet},null===e||void 0===e?void 0:e.id)))}),Object(s.jsx)(x.a,{fullWidth:!0,select:!0,label:"Agent",value:N,onChange:e=>k(e.target.value),SelectProps:{MenuProps:{sx:{"& .MuiPaper-root":{maxHeight:260}}}},sx:{maxWidth:{md:M},textTransform:"capitalize"},children:null===(a=[{id:0,first_name:"Tout"},...A])||void 0===a?void 0:a.map((e=>Object(s.jsxs)(O.a,{value:null===e||void 0===e?void 0:e.id,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:[null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]},null===e||void 0===e?void 0:e.id)))}),Object(s.jsx)(S.a,{label:"Date de d\xe9but",value:j,inputFormat:"yyyy-MM-dd",onChange:e=>{l(e)},renderInput:e=>Object(s.jsx)(x.a,{...e,fullWidth:!0,sx:{maxWidth:{md:M}}})}),Object(s.jsx)(S.a,{label:"Date de fin",value:m,inputFormat:"yyyy-MM-dd",onChange:e=>{c(e)},renderInput:e=>Object(s.jsx)(x.a,{...e,fullWidth:!0,sx:{maxWidth:{md:M}}})}),Object(s.jsx)(y,{value:n,onChange:r,placeholder:"Rechercher par ticket?...",startAdornment:Object(s.jsx)(f.a,{position:"start",children:Object(s.jsx)(o.a,{component:u.a,icon:b.a,sx:{color:"text.disabled"}})})}),Object(s.jsx)(p.a,{title:"Filter list",children:Object(s.jsx)(g.a,{loading:F,variant:"contained",onClick:d,children:"Filtrer"})})]})}var N=i(8),T=i.n(N),C=i(1),k=(i(1243),i(159)),F=i(222),L=i(103),A=i(63),_=(i(22),i(76)),R=i(46),G=i(297);function P(e){let{ficheId:t,elimine:i}=e;const a=Object(C.useRef)(null),{user:n}=Object(R.a)(),[r,l]=Object(C.useState)(!1),{enqueueSnackbar:c}=Object(k.b)(),o=Object(L.c)(),d=async()=>{if(!r){l(!0);const e={ficheId:t};await F.a.handleUpdateFiche(e),l(!1),o(Object(A.v)()),c(i?"fiche valide with success":"Elimin\xe9 with success",{variant:"success"})}};return Object(s.jsx)(s.Fragment,{children:i?Object(G.a)(null===n||void 0===n?void 0:n.perms,_.a.REACTIVATE_FICHE)&&Object(s.jsx)(g.a,{loading:r,ref:a,color:i?"primary":"error",size:"small",variant:"contained",onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir ".concat(i?"Reactiver":"Elimin\xe9"," ce fiche?"))&&d()},children:i?"Reactiver":"Elimin\xe9"}):Object(G.a)(null===n||void 0===n?void 0:n.perms,"delete_fichevente")&&Object(s.jsx)(g.a,{loading:r,ref:a,color:i?"primary":"error",size:"small",variant:"contained",onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir ".concat(i?"Reactiver":"Elimin\xe9"," ce fiche?"))&&d()},children:i?"Reactiver":"Elimin\xe9"})})}P.propTys={ficheId:T.a.number,elimine:T.a.bool}},1394:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var a=i(1),n=i(49),r=i(1422),l=i(1423),c=i(1221),o=i(1206),s=i(296),d=(i(27),i(387),i(163),i(32)),u=(i(381),i(1277)),j=i(223),b=i(22),m=i(0);function h(e){Object(n.a)();const{ite:t,role:i}=e,[h,v]=Object(a.useState)(!1);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(r.a,{hover:!0,children:["superuser"===i&&Object(m.jsx)(l.a,{component:"th",scope:"row",padding:"none",children:Object(m.jsxs)(c.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(m.jsx)(o.a,{alt:null===t||void 0===t?void 0:t.companyName,src:null===t||void 0===t?void 0:t.company_photo}),Object(m.jsx)(s.a,{variant:"subtitle2",noWrap:!0,children:null===t||void 0===t?void 0:t.companyName})]})}),Object(m.jsx)(l.a,{component:d.b,to:"".concat(b.a.fiche_view(null===t||void 0===t?void 0:t.ref_code)),align:"left",sx:{color:"#143fff"},children:null===t||void 0===t?void 0:t.ref_code}),Object(m.jsxs)(l.a,{align:"left",children:[null===t||void 0===t?void 0:t.agent_first_name," ",null===t||void 0===t?void 0:t.agent_last_name]}),Object(m.jsx)(l.a,{align:"left",children:null===t||void 0===t?void 0:t.name}),Object(m.jsx)(l.a,{align:"left",children:parseFloat(null===t||void 0===t?void 0:t.montant).toFixed(2)}),Object(m.jsx)(l.a,{align:"left",children:Object(j.c)(null===t||void 0===t?void 0:t.created_on)}),Object(m.jsx)(l.a,{align:"left",children:Object(m.jsx)(u.c,{ficheId:null===t||void 0===t?void 0:t.id,elimine:null===t||void 0===t?void 0:t.is_delete})})]})})}},1889:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return R}));var a=i(158),n=(i(27),i(1)),r=(i(1242),i(159)),l=i(4),c=i(49),o=i(1422),s=i(1226),d=i(1255),u=i(1419),j=i(1221),b=i(296),m=i(1420),h=i(1424),v=i(1423),x=(i(222),i(103)),O=i(63),f=i(22),p=i(91),g=i(380),S=(i(381),i(68)),y=i(1244),M=i(1241),w=i(1277),N=i(223),T=i(1240),C=i(1394),k=i(46),F=i(0);const L=[{id:"ref_code",label:"Ticket",alignleft:!0},{id:"name",label:"Nom Agent",alignleft:!0},{id:"type",label:"Tirage",alignleft:!0},{id:"montant",label:"Vente",alignleft:!0},{id:"date",label:"Date",alignleft:!0},{id:"supprimer",label:"Supprimer",alignleft:!0}],A=[{id:"NYM",name:"New York Midi"},{id:"NYS",name:"New York Soir"},{id:"FLM",name:"Florida Midi"},{id:"FLS",name:"Florida Soir"},{id:"GGMT",name:"Georgia Matin"},{id:"GGMD",name:"Georgia Soir"},{id:"GGS",name:"Georgia Nuit"},{id:"TXMA",name:"Texas Matin"},{id:"TXM",name:"Texas Midi"},{id:"TXS",name:"Texas Soir"},{id:"CGM",name:"Chicago Midi"},{id:"CGS",name:"Chicago Soir"},{id:"LCM",name:"Lave chody\xe8 Matin"},{id:"LCS",name:"Lave chody\xe8 Soir"},{id:"TNM",name:"Tennessee Matin"},{id:"TNMD",name:"Tennessee Midi"},{id:"TNS",name:"Tennessee Soir"},{id:"NJM",name:"New Jersey Matin"},{id:"NJMM",name:"New Jersey Midi"},{id:"NJS",name:"New Jersey Soir"},{id:"ANA",name:"Anguilla AM (10H)"},{id:"ANM",name:"Anguilla Midi"},{id:"ANS",name:"Anguilla Soir"},{id:"ANN",name:"Anguilla Nuit"},{id:"RL",name:"Real"},{id:"PRM",name:"Primera Midi"},{id:"PRS",name:"Primera Soir"},{id:"SUA",name:"Suerte AM"},{id:"SUS",name:"Suerte Soir"},{id:"LK",name:"Loteka"},{id:"KL",name:"King Lottery Noche"},{id:"NA",name:"Nacional Midi"},{id:"NAS",name:"Nacional Soir"},{id:"QPL",name:"Quiniela pal\xe9"}];Object(l.a)(o.a)((e=>{let{theme:t}=e;return{"& td":{paddingTop:t.spacing(1),paddingBottom:t.spacing(1)}}}));function _(e,t,i){return t[i]<e[i]?-1:t[i]>e[i]?1:0}function R(){var e;const{user:t}=Object(k.a)(),{themeStretch:i}=Object(p.a)(),{enqueueSnackbar:l}=(Object(c.a)(),Object(r.b)()),R=Object(x.c)(),{fichesupps:G,agents:P,surcussales:W,infotirages:I}=Object(x.d)((e=>e.user)),[D,z]=Object(n.useState)(!1),[E,J]=Object(n.useState)(0),[V,B]=Object(n.useState)("asc"),[H,q]=Object(n.useState)([]),[Q,Y]=Object(n.useState)("first_name"),[K,U]=Object(n.useState)(""),[X,Z]=Object(n.useState)(25),[$,ee]=Object(n.useState)(new Date),[te,ie]=Object(n.useState)(new Date),[ae,ne]=Object(n.useState)(0),[re,le]=Object(n.useState)(0),[ce,oe]=Object(n.useState)(0);Object(n.useEffect)((()=>{R(Object(O.e)()),R(Object(O.G)()),R(Object(O.w)())}),[R]);const se=(e,t)=>{B(Q===t&&"asc"===V?"desc":"asc"),Y(t)},de=e=>{if(e.target.checked){const e=null===G||void 0===G?void 0:G.map((e=>e.id));q(e)}else q([])},ue=(E>0&&Math.max(0,(1+E)*X-G.length),function(e,t,i){const n=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===n||void 0===n||n.sort(((e,i)=>{const a=t(e[0],i[0]);return 0!==a?a:e[1]-i[1]})),i?Object(a.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.ref_code.toLowerCase().indexOf(i.toLowerCase())))):null===n||void 0===n?void 0:n.map((e=>e[0]))}(G,function(e,t){return"desc"===e?(e,i)=>_(e,i,t):(e,i)=>-_(e,i,t)}(V,Q),K)),je=Object(a.sum)(null===ue||void 0===ue?void 0:ue.map((e=>parseFloat(e.montant)))).toFixed(2),be=0===(null===ue||void 0===ue?void 0:ue.length),me=ue.reduce(((e,t)=>(e[t.name]||(e[t.name]=[]),e[t.name].push(t),e)),{}),he=Object.keys(me).map((e=>({name:e,fiches:me[e]})));return Object(F.jsx)(g.a,{title:"Fiche supprim\xe9s: List | RLP Center Lotto",children:Object(F.jsxs)(s.a,{maxWidth:!i&&"lg",children:[Object(F.jsx)(M.a,{heading:"Liste des fiches supprim\xe9s",links:[{name:"Dashboard",href:f.a.root},{name:"Fiches supprim\xe9s",href:null===(e=f.a.borlette)||void 0===e?void 0:e.list},{name:"Listes"}]}),Object(F.jsxs)(d.a,{children:[Object(F.jsx)(w.b,{filterName:K,onFilterName:e=>{U(e.target.value)},value:$,value1:te,value2:ae,value3:re,value4:ce,setValue2:ne,setValue3:le,setValue4:oe,onChangeDate1:e=>{ee(e)},onChangeDate2:e=>{ie(e)},handleGo:async()=>{z(!0),await R(Object(O.u)(Object(N.a)($),Object(N.a)(te),ae,re,ce)),z(!1)},isFicheNotFound:be,loading:D,setLoading:z,agents:P,surcussales:W,infoTirages:"superuser"!==(null===t||void 0===t?void 0:t.role)?I:A}),Object(F.jsx)(S.a,{children:Object(F.jsxs)(u.a,{sx:{minWidth:800},children:[he.map((e=>{var t;return Object(F.jsxs)(j.a,{spacing:3,children:[Object(F.jsx)(b.a,{variant:"h5",sx:{pl:3},children:e.name}),Object(F.jsxs)(m.a,{children:[Object(F.jsx)(w.a,{order:V,orderBy:Q,headLabel:L,rowCount:null===G||void 0===G?void 0:G.length,numSelected:null===H||void 0===H?void 0:H.length,onRequestSort:se,onSelectAllClick:de}),Object(F.jsx)(h.a,{children:e.fiches.map((e=>Object(F.jsx)(C.a,{ite:e},null===e||void 0===e?void 0:e.id)))}),Object(F.jsxs)(o.a,{children:[Object(F.jsx)(v.a,{colSpan:2}),Object(F.jsx)(v.a,{align:"center",children:Object(F.jsx)(b.a,{variant:"subtitle2",children:"Total"})}),Object(F.jsx)(v.a,{align:"left",width:100,children:Object(F.jsx)(b.a,{variant:"subtitle2",children:Object(a.sum)(null===(t=e.fiches)||void 0===t?void 0:t.map((e=>parseFloat(e.montant)))).toFixed(2)})})]})]})]})})),!be&&Object(F.jsxs)(o.a,{children:[Object(F.jsx)(v.a,{colSpan:4}),Object(F.jsx)(v.a,{align:"center",children:Object(F.jsx)(b.a,{variant:"h6",children:"Grand Total"})}),Object(F.jsx)(v.a,{align:"left",width:100,children:Object(F.jsx)(b.a,{variant:"h6",children:Object(T.a)(je)})})]}),be&&Object(F.jsx)(h.a,{children:Object(F.jsx)(o.a,{children:Object(F.jsx)(v.a,{align:"center",colSpan:10,sx:{py:3},children:Object(F.jsx)(y.a,{searchQuery:K})})})})]})})]})]})})}}}]);
//# sourceMappingURL=29.b71d5904.chunk.js.map