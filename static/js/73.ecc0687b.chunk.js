(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[73],{1915:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Oe}));var i=n(158),a=n(27),o=n(1),l=n(1242),c=n.n(l),r=n(32),d=n(49),s=n(1226),j=n(1201),h=n(1255),b=n(1419),u=n(1420),v=n(1424),g=n(1422),O=n(1423),p=n(1221),x=n(1206),m=n(296),f=n(1276),y=n(103),w=n(63),k=n(22),_=n(91),C=n(380),S=n(381),R=n(69),P=n(1244),I=n(1241),L=n(1561),A=n(1421),N=n(1939),B=n(557),T=n(0);function W(e){let{order:t,orderBy:n,rowCount:i,headLabel:a,numSelected:o,onRequestSort:l,onSelectAllClick:c}=e;return Object(T.jsx)(A.a,{children:Object(T.jsx)(g.a,{children:a.map((e=>{return Object(T.jsx)(O.a,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:Object(T.jsxs)(N.a,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(i=e.id,e=>{l(e,i)}),children:[e.label,n===e.id?Object(T.jsx)(B.a,{sx:{...L.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})}var D=n(298),E=n.n(D),F=n(4),q=n(1224),z=n(1210),G=n(1229),M=n(1227),V=n(1204);const J=Object(F.a)(q.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),K=Object(F.a)(z.a)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function Q(e){let{loading:t,handleGo:n,filterName:i,onFilterName:o}=e;return Object(T.jsxs)(J,{children:[Object(T.jsx)(K,{value:i,onChange:o,placeholder:"Rechercher un vendeur?...",startAdornment:Object(T.jsx)(G.a,{position:"start",children:Object(T.jsx)(B.a,{component:a.a,icon:E.a,sx:{color:"text.disabled"}})})}),Object(T.jsx)(M.a,{title:"Filter list",children:Object(T.jsx)(V.a,{sx:{py:2,px:3},loading:t,variant:"contained",onClick:n,children:"Rafra\xeechir"})})]})}var U=n(1243),H=n.n(U),X=n(1262),Y=n.n(X),Z=n(1263),$=n.n(Z),ee=n(1249),te=n.n(ee),ne=n(1246),ie=n.n(ne),ae=n(159),oe=n(1214),le=n(553),ce=n(1230),re=n(1185),de=n(1186),se=n(222),je=n(76),he=n(46),be=n(297);function ue(e){var t;let{block:n,agentId:i}=e;const l=Object(o.useRef)(null),{user:c}=Object(he.a)(),[d,s]=Object(o.useState)(!1),{enqueueSnackbar:j}=Object(ae.b)(),h=Object(y.c)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(oe.a,{ref:l,onClick:()=>s(!0),children:Object(T.jsx)(a.a,{icon:ie.a,width:20,height:20})}),Object(T.jsxs)(le.a,{open:d,anchorEl:l.current,onClose:()=>s(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(be.a)(null===c||void 0===c?void 0:c.perms,"delete_agent")&&Object(T.jsxs)(ce.a,{onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir supprimer?")&&(async()=>{s(!1);const e={agentId:i};await se.a.handleDeleteAgent(e),h(Object(w.e)()),j("delete with succes",{variant:"success"})})()},sx:{color:"red"},children:[Object(T.jsx)(re.a,{children:Object(T.jsx)(a.a,{icon:te.a,width:24,height:24})}),Object(T.jsx)(de.a,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]}),Object(be.a)(null===c||void 0===c?void 0:c.perms,je.a.BLOCK_AGENT)&&Object(T.jsxs)(ce.a,{onClick:async()=>{s(!1);const e={agentId:i,type:"block"};await se.a.handleModifyAgent(e),h(Object(w.e)()),j(n?"unblock with success":"Block with success",{variant:"success"})},sx:{color:"text.secondary"},children:[Object(T.jsx)(re.a,{children:Object(T.jsx)(a.a,{icon:n?Y.a:$.a,width:24,height:24})}),Object(T.jsx)(de.a,{primary:n?"Unblock":"Block",primaryTypographyProps:{variant:"body2"}})]}),Object(be.a)(null===c||void 0===c?void 0:c.perms,"change_agent")&&Object(T.jsxs)(ce.a,{component:r.b,to:"".concat(null===(t=k.a.agent)||void 0===t?void 0:t.root,"/").concat(i,"/edit"),sx:{color:"text.secondary"},children:[Object(T.jsx)(re.a,{children:Object(T.jsx)(a.a,{icon:H.a,width:24,height:24})}),Object(T.jsx)(de.a,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]})]})]})}const ve=[{id:"name",label:"Nom complet",alignRight:!1},{id:"ref_code",label:"Ref_code",alignRight:!1},{id:"com",label:"Com",alignRight:!1},{id:"com_sp",label:"Com. Sup",alignRight:!1},{id:"phone",label:"T\xe9l\xe9phone",alignRight:!1},{id:"country",label:"Pays",alignRight:!1},{id:"city",label:"Ville",alignRight:!1},{id:"addresse_complet",label:"Adresse compl\xe8te",alignRight:!1},{id:"block",label:"Block",alignRight:!1},{id:""}];function ge(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Oe(){var e,t,n;const{user:l}=Object(he.a)(),{themeStretch:L}=Object(_.a)(),A=Object(d.a)(),N=Object(y.c)(),{agents:B}=Object(y.d)((e=>e.user)),[D,E]=Object(o.useState)(0),[F,q]=Object(o.useState)("asc"),[z,G]=Object(o.useState)([]),[M,V]=Object(o.useState)("first_name"),[J,K]=Object(o.useState)(""),[U,H]=Object(o.useState)(25),[X,Y]=Object(o.useState)(!1),Z=async()=>{Y(!0),await N(Object(w.e)()),Y(!1)};Object(o.useEffect)((()=>{Z()}),[N]);const $=D>0?Math.max(0,(1+D)*U-B.length):0,ee=function(e,t,n){const a=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===a||void 0===a||a.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n?Object(i.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.first_name.toLowerCase().indexOf(n.toLowerCase())))):null===a||void 0===a?void 0:a.map((e=>e[0]))}(B,function(e,t){return"desc"===e?(e,n)=>ge(e,n,t):(e,n)=>-ge(e,n,t)}(F,M),J),te=0===(null===ee||void 0===ee?void 0:ee.length);return Object(T.jsx)(C.a,{title:"Venduer: List | RLP Center Lotto",children:Object(T.jsxs)(s.a,{maxWidth:!L&&"lg",children:[Object(T.jsx)(I.a,{heading:"Liste des vendeurs",links:[{name:"Dashboard",href:k.a.root},{name:"Vendeur",href:null===(e=k.a.agent)||void 0===e?void 0:e.root},{name:"Listes"}],action:Object(be.a)(null===l||void 0===l?void 0:l.perms,"add_agent")&&Object(T.jsx)(j.a,{variant:"contained",component:r.b,to:null===(t=k.a.agent)||void 0===t?void 0:t.newAgent,startIcon:Object(T.jsx)(a.a,{icon:c.a}),children:"Ajouter vendeur"})}),Object(T.jsxs)(h.a,{children:[Object(T.jsx)(Q,{handleGo:Z,loading:X,filterName:J,onFilterName:e=>{K(e.target.value)}}),Object(T.jsx)(R.a,{children:Object(T.jsx)(b.a,{sx:{minWidth:800},children:Object(T.jsxs)(u.a,{children:[Object(T.jsx)(W,{order:F,orderBy:M,headLabel:[..."superuser"===(null===l||void 0===l?void 0:l.role)?[{id:"company",label:"Compagnie",alignRight:!1}]:[],...ve],rowCount:null===B||void 0===B?void 0:B.length,numSelected:null===z||void 0===z?void 0:z.length,onRequestSort:(e,t)=>{q(M===t&&"asc"===F?"desc":"asc"),V(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===B||void 0===B?void 0:B.map((e=>e.id));G(e)}else G([])}}),Object(T.jsxs)(v.a,{children:[null===(n=U>0?null===ee||void 0===ee?void 0:ee.slice(D*U,D*U+U):ee)||void 0===n?void 0:n.map((e=>{const t=-1!==z.indexOf(null===e||void 0===e?void 0:e.id);return Object(T.jsxs)(g.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:["superuser"===(null===l||void 0===l?void 0:l.role)&&Object(T.jsx)(O.a,{component:"th",scope:"row",padding:"none",children:Object(T.jsxs)(p.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{alt:null===e||void 0===e?void 0:e.companyName,src:null===e||void 0===e?void 0:e.company_photo}),Object(T.jsx)(m.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyName})]})}),"superuser"!==(null===l||void 0===l?void 0:l.role)&&Object(T.jsx)(O.a,{component:"th",scope:"row",padding:"none",children:Object(T.jsxs)(p.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{alt:null===e||void 0===e?void 0:e.first_name,src:null===e||void 0===e?void 0:e.user_photo}),Object(T.jsxs)(m.a,{variant:"subtitle2",noWrap:!0,children:[null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]})]})}),"superuser"===(null===l||void 0===l?void 0:l.role)&&Object(T.jsxs)(O.a,{align:"left",children:[null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]}),Object(T.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.ref_code}),Object(T.jsxs)(O.a,{align:"left",children:[null===e||void 0===e?void 0:e.c_percent,"%"]}),Object(T.jsxs)(O.a,{align:"left",children:[null===e||void 0===e?void 0:e.sp_c_percent,"%"]}),Object(T.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.phone}),Object(T.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.country_name}),Object(T.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.city_name}),Object(T.jsx)(O.a,{align:"left",children:null===e||void 0===e?void 0:e.addresse_complet}),Object(T.jsx)(O.a,{align:"left",children:Object(T.jsx)(S.a,{variant:"light"===A.palette.mode?"ghost":"filled",color:(null===e||void 0===e?void 0:e.block)?"error":"success",children:null!==e&&void 0!==e&&e.block?"Oui":"Non"})}),Object(T.jsx)(O.a,{align:"right",children:Object(T.jsx)(ue,{block:null===e||void 0===e?void 0:e.block,agentId:null===e||void 0===e?void 0:e.id})})]},null===e||void 0===e?void 0:e.id)})),$>0&&Object(T.jsx)(g.a,{style:{height:53*$},children:Object(T.jsx)(O.a,{colSpan:6})})]}),te&&Object(T.jsx)(v.a,{children:Object(T.jsx)(g.a,{children:Object(T.jsx)(O.a,{align:"center",colSpan:6,sx:{py:3},children:Object(T.jsx)(P.a,{searchQuery:J})})})})]})})}),Object(T.jsx)(f.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===B||void 0===B?void 0:B.length,rowsPerPage:U,page:D,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{H(parseInt(e.target.value,10)),E(0)}})]})]})})}}}]);
//# sourceMappingURL=73.ecc0687b.chunk.js.map