(this.webpackJsonplpcenter=this.webpackJsonplpcenter||[]).push([[74],{1918:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return je}));var a=n(158),i=n(27),o=n(1),c=n(1242),r=n.n(c),s=n(32),l=n(49),d=n(1226),j=n(1201),h=n(1255),b=n(1419),u=n(1420),O=n(1424),p=n(1422),g=n(1423),x=n(1221),v=n(1206),m=n(296),f=n(1276),w=n(103),y=n(63),S=n(22),C=n(91),k=n(380),P=(n(381),n(68)),R=n(1244),L=n(1241),_=n(1561),I=n(1421),M=n(1939),N=n(557),z=n(0);function W(e){let{order:t,orderBy:n,rowCount:a,headLabel:i,numSelected:o,onRequestSort:c,onSelectAllClick:r}=e;return Object(z.jsx)(I.a,{children:Object(z.jsx)(p.a,{children:i.map((e=>{return Object(z.jsx)(g.a,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:Object(z.jsxs)(M.a,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(a=e.id,e=>{c(e,a)}),children:[e.label,n===e.id?Object(z.jsx)(N.a,{sx:{..._.a},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var a}))})})}var A=n(298),D=n.n(A),F=n(4),q=n(1224),E=n(1210),T=n(1229),B=n(1227),G=n(1204);const J=Object(F.a)(q.a)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),Q=Object(F.a)(E.a)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320,boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function H(e){let{loading:t,handleGo:n,filterName:a,onFilterName:o}=e;return Object(z.jsxs)(J,{children:[Object(z.jsx)(Q,{value:a,onChange:o,placeholder:"Rechercher compagnie?...",startAdornment:Object(z.jsx)(T.a,{position:"start",children:Object(z.jsx)(N.a,{component:i.a,icon:D.a,sx:{color:"text.disabled"}})})}),Object(z.jsx)(B.a,{title:"Filter list",children:Object(z.jsx)(G.a,{sx:{py:2,px:3},loading:t,variant:"contained",onClick:n,children:"Rafra\xeechir"})})]})}var K=n(1243),U=n.n(K),V=(n(1262),n(1263),n(1249)),X=n.n(V),Y=n(1246),Z=n.n(Y),$=n(159),ee=n(1214),te=n(553),ne=n(1230),ae=n(1185),ie=n(1186),oe=n(222),ce=(n(76),n(46)),re=n(297);function se(e){var t;let{block:n,messageId:a}=e;const c=Object(o.useRef)(null),{user:r}=Object(ce.a)(),[l,d]=Object(o.useState)(!1),{enqueueSnackbar:j}=Object($.b)(),h=Object(w.c)();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(ee.a,{ref:c,onClick:()=>d(!0),children:Object(z.jsx)(i.a,{icon:Z.a,width:20,height:20})}),Object(z.jsxs)(te.a,{open:l,anchorEl:c.current,onClose:()=>d(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(re.a)(null===r||void 0===r?void 0:r.perms,"delete_apppromote")&&Object(z.jsxs)(ne.a,{onClick:()=>{window.confirm("\xcates-vous s\xfbr de bien vouloir supprimer?")&&(async()=>{d(!1);const e={messageId:a};await oe.a.handleDeleteMessage(e),h(Object(y.z)()),j("delete with success",{variant:"success"})})()},sx:{color:"red"},children:[Object(z.jsx)(ae.a,{children:Object(z.jsx)(i.a,{icon:X.a,width:24,height:24})}),Object(z.jsx)(ie.a,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]}),Object(re.a)(null===r||void 0===r?void 0:r.perms,"change_apppromote")&&Object(z.jsxs)(ne.a,{component:s.b,to:"".concat(null===(t=S.a.user)||void 0===t?void 0:t.promote,"/").concat(a,"/edit"),sx:{color:"text.secondary"},children:[Object(z.jsx)(ae.a,{children:Object(z.jsx)(i.a,{icon:U.a,width:24,height:24})}),Object(z.jsx)(ie.a,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]})]})]})}const le=[{id:"name",label:"Compagnie",alignRight:!1},{id:"pour",label:"Pour ?",alignRight:!1},{id:"text",label:"message",alignRight:!1},{id:"created_on",label:"created_on",alignRight:!1},{id:""}];function de(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function je(){var e;const{user:t}=Object(ce.a)(),{themeStretch:n}=Object(C.a)(),c=(Object(l.a)(),Object(w.c)()),{promote:_}=Object(w.d)((e=>e.user)),[I,M]=Object(o.useState)(0),[N,A]=Object(o.useState)("asc"),[D,F]=Object(o.useState)([]),[q,E]=Object(o.useState)("first_name"),[T,B]=Object(o.useState)(""),[G,J]=Object(o.useState)(25),[Q,K]=Object(o.useState)(!1),U=async()=>{K(!0),await c(Object(y.z)()),K(!1)};Object(o.useEffect)((()=>{U()}),[c]);const V=I>0?Math.max(0,(1+I)*G-_.length):0,X=function(e,t,n){const i=null===e||void 0===e?void 0:e.map(((e,t)=>[e,t]));return null===i||void 0===i||i.sort(((e,n)=>{const a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n?Object(a.filter)(e,(e=>-1!==(null===e||void 0===e?void 0:e.first_name.toLowerCase().indexOf(n.toLowerCase())))):null===i||void 0===i?void 0:i.map((e=>e[0]))}(_,function(e,t){return"desc"===e?(e,n)=>de(e,n,t):(e,n)=>-de(e,n,t)}(N,q),T),Y=0===(null===X||void 0===X?void 0:X.length);return Object(z.jsx)(k.a,{title:"Message: List | RLP Center Lotto",children:Object(z.jsxs)(d.a,{maxWidth:!n&&"lg",children:[Object(z.jsx)(L.a,{heading:"Liste des Messages push",links:[{name:"Dashboard",href:S.a.root},{name:"Messages",href:S.a.user.promote},{name:"Listes"}],action:Object(re.a)(null===t||void 0===t?void 0:t.perms,"add_apppromote")&&Object(z.jsx)(j.a,{variant:"contained",component:s.b,to:S.a.user.newPromote,startIcon:Object(z.jsx)(i.a,{icon:r.a}),children:"Ajouter Message"})}),Object(z.jsxs)(h.a,{children:[Object(z.jsx)(H,{handleGo:U,loading:Q,filterName:T,onFilterName:e=>{B(e.target.value)}}),Object(z.jsx)(P.a,{children:Object(z.jsx)(b.a,{sx:{minWidth:800},children:Object(z.jsxs)(u.a,{children:[Object(z.jsx)(W,{order:N,orderBy:q,headLabel:le,rowCount:null===_||void 0===_?void 0:_.length,numSelected:null===D||void 0===D?void 0:D.length,onRequestSort:(e,t)=>{A(q===t&&"asc"===N?"desc":"asc"),E(t)},onSelectAllClick:e=>{if(e.target.checked){const e=null===_||void 0===_?void 0:_.map((e=>e.id));F(e)}else F([])}}),Object(z.jsxs)(O.a,{children:[null===(e=G>0?null===X||void 0===X?void 0:X.slice(I*G,I*G+G):X)||void 0===e?void 0:e.map((e=>{const t=-1!==D.indexOf(null===e||void 0===e?void 0:e.id);return Object(z.jsxs)(p.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,"aria-checked":t,children:[Object(z.jsx)(g.a,{component:"th",scope:"row",padding:"none",children:Object(z.jsxs)(x.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(z.jsx)(v.a,{alt:null===e||void 0===e?void 0:e.companyName,src:null===e||void 0===e?void 0:e.company_photo}),Object(z.jsx)(m.a,{variant:"subtitle2",noWrap:!0,children:null===e||void 0===e?void 0:e.companyName})]})}),Object(z.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.who_name}),Object(z.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.text}),Object(z.jsx)(g.a,{align:"left",children:null===e||void 0===e?void 0:e.created_on}),Object(z.jsx)(g.a,{align:"right",children:Object(z.jsx)(se,{block:null===e||void 0===e?void 0:e.block,messageId:null===e||void 0===e?void 0:e.id})})]},null===e||void 0===e?void 0:e.id)})),V>0&&Object(z.jsx)(p.a,{style:{height:53*V},children:Object(z.jsx)(g.a,{colSpan:6})})]}),Y&&Object(z.jsx)(O.a,{children:Object(z.jsx)(p.a,{children:Object(z.jsx)(g.a,{align:"center",colSpan:6,sx:{py:3},children:Object(z.jsx)(R.a,{searchQuery:T})})})})]})})}),Object(z.jsx)(f.a,{labelRowsPerPage:"Lignes par page",rowsPerPageOptions:[25,50,75,100,{label:"Tout",value:-1}],component:"div",count:null===_||void 0===_?void 0:_.length,rowsPerPage:G,page:I,onPageChange:(e,t)=>{M(t)},onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),M(0)}})]})]})})}}}]);
//# sourceMappingURL=74.abbd9042.chunk.js.map